{"id": "8fa6dd3247454a8e8b7157c55c84f273", "repo_name": "discourse", "file_path": "./repos/discourse/db/migrate/20230104054425_rename_rate_limit_search_anon.rb", "method_name": "down", "method_source": "def down\n    raise ActiveRecord::IrreversibleMigration\n  end", "ast_json": "{\"type\":\"def\",\"children\":[\"down\",{\"type\":\"args\",\"children\":[]},{\"type\":\"send\",\"children\":[null,\"raise\",{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"ActiveRecord\"]},\"IrreversibleMigration\"]}]}]}", "descriptions": [{"source": "method_name", "text": "downs"}]}
{"id": "b5d6d704dd6417bca75c0819517cc568", "repo_name": "gitlabhq", "file_path": "./repos/gitlabhq/qa/qa/page/project/sub_menus/code.rb", "method_name": "open_code_submenu", "method_source": "def open_code_submenu(sub_menu)\n            open_submenu('Code', sub_menu)\n          end", "ast_json": "{\"type\":\"def\",\"children\":[\"open_code_submenu\",{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"sub_menu\"]}]},{\"type\":\"send\",\"children\":[null,\"open_submenu\",{\"type\":\"str\",\"children\":[\"Code\"]},{\"type\":\"lvar\",\"children\":[\"sub_menu\"]}]}]}", "descriptions": [{"source": "method_name", "text": "opens code submenu"}]}
{"id": "02390841ce4a1d749109da6e1c15099e", "repo_name": "fastlane", "file_path": "./repos/fastlane/spaceship/lib/spaceship/client.rb", "method_name": "fetch_hashcash", "method_source": "def fetch_hashcash\n      response = request(:get, \"https://idmsa.apple.com/appleauth/auth/signin?widgetKey=#{self.itc_service_key}\")\n      headers = response.headers\n\n      bits = headers[\"X-Apple-HC-Bits\"]\n      challenge = headers[\"X-Apple-HC-Challenge\"]\n\n      if bits.nil? || challenge.nil?\n        puts(\"Unable to find 'X-Apple-HC-Bits' and 'X-Apple-HC-Challenge' to make hashcash\")\n        return nil\n      end\n\n      return Spaceship::Hashcash.make(bits: bits, challenge: challenge)\n    end", "ast_json": "{\"type\":\"def\",\"children\":[\"fetch_hashcash\",{\"type\":\"args\",\"children\":[]},{\"type\":\"begin\",\"children\":[{\"type\":\"lvasgn\",\"children\":[\"response\",{\"type\":\"send\",\"children\":[null,\"request\",{\"type\":\"sym\",\"children\":[\"get\"]},{\"type\":\"dstr\",\"children\":[{\"type\":\"str\",\"children\":[\"https://idmsa.apple.com/appleauth/auth/signin?widgetKey=\"]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"self\",\"children\":[]},\"itc_service_key\"]}]}]}]}]},{\"type\":\"lvasgn\",\"children\":[\"headers\",{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"response\"]},\"headers\"]}]},{\"type\":\"lvasgn\",\"children\":[\"bits\",{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"headers\"]},\"[]\",{\"type\":\"str\",\"children\":[\"X-Apple-HC-Bits\"]}]}]},{\"type\":\"lvasgn\",\"children\":[\"challenge\",{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"headers\"]},\"[]\",{\"type\":\"str\",\"children\":[\"X-Apple-HC-Challenge\"]}]}]},{\"type\":\"if\",\"children\":[{\"type\":\"or\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"bits\"]},\"nil?\"]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"challenge\"]},\"nil?\"]}]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[null,\"puts\",{\"type\":\"str\",\"children\":[\"Unable to find 'X-Apple-HC-Bits' and 'X-Apple-HC-Challenge' to make hashcash\"]}]},{\"type\":\"return\",\"children\":[{\"type\":\"nil\",\"children\":[]}]}]},null]},{\"type\":\"return\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Spaceship\"]},\"Hashcash\"]},\"make\",{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"bits\"]},{\"type\":\"lvar\",\"children\":[\"bits\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"challenge\"]},{\"type\":\"lvar\",\"children\":[\"challenge\"]}]}]}]}]}]}]}", "descriptions": [{"source": "method_name", "text": "fetches hashcash"}]}
{"id": "87f1de1eaa5964f4343d2845fae0cb9e", "repo_name": "gitlabhq", "file_path": "./repos/gitlabhq/vendor/gems/sidekiq/test/retry_exhausted_test.rb", "method_name": "old_worker", "method_source": "def old_worker\n    @old_worker ||= OldJob.new\n  end", "ast_json": "{\"type\":\"def\",\"children\":[\"old_worker\",{\"type\":\"args\",\"children\":[]},{\"type\":\"or_asgn\",\"children\":[{\"type\":\"ivasgn\",\"children\":[\"@old_worker\"]},{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"OldJob\"]},\"new\"]}]}]}", "descriptions": [{"source": "method_name", "text": "olds worker"}]}
{"id": "7b3f9755e9f184d0f87ec503a832feef", "repo_name": "gitlabhq", "file_path": "./repos/gitlabhq/app/helpers/protected_refs_helper.rb", "method_name": "protected_access_levels_for_dropdowns", "method_source": "def protected_access_levels_for_dropdowns\n    {\n      create_access_levels: protected_access_level_dropdown_roles,\n      push_access_levels: protected_access_level_dropdown_roles,\n      merge_access_levels: protected_access_level_dropdown_roles\n    }\n  end", "ast_json": "{\"type\":\"def\",\"children\":[\"protected_access_levels_for_dropdowns\",{\"type\":\"args\",\"children\":[]},{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"create_access_levels\"]},{\"type\":\"send\",\"children\":[null,\"protected_access_level_dropdown_roles\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"push_access_levels\"]},{\"type\":\"send\",\"children\":[null,\"protected_access_level_dropdown_roles\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"merge_access_levels\"]},{\"type\":\"send\",\"children\":[null,\"protected_access_level_dropdown_roles\"]}]}]}]}", "descriptions": [{"source": "method_name", "text": "protecteds access levels for dropdowns"}, {"source": "test_description", "text": "returns roles for {create,push,merge}_access_levels"}, {"source": "test_description", "text": "returns dropdown options for each protected ref access level"}]}
{"id": "a12ac74484a9ad6e5804ff19797853d6", "repo_name": "gitlabhq", "file_path": "./repos/gitlabhq/lib/gitlab/fp/message.rb", "method_name": "==", "method_source": "def ==(other)\n        self.class == other.class && content == other.content\n      end", "ast_json": "{\"type\":\"def\",\"children\":[\"==\",{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"other\"]}]},{\"type\":\"and\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"self\",\"children\":[]},\"class\"]},\"==\",{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"other\"]},\"class\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"content\"]},\"==\",{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"other\"]},\"content\"]}]}]}]}", "descriptions": [{"source": "method_name", "text": "==s"}]}
{"id": "2a3c49d6209f63ffafddc779b4300cd3", "repo_name": "haml", "file_path": "./repos/haml/test/haml/engine_test.rb", "method_name": "test_colon_in_id_attr", "method_source": "def test_colon_in_id_attr\n    assert_equal(\"<p id='foo:bar'>\\n\", render(\"%p#foo:bar/\"))\n  end", "ast_json": "{\"type\":\"def\",\"children\":[\"test_colon_in_id_attr\",{\"type\":\"args\",\"children\":[]},{\"type\":\"send\",\"children\":[null,\"assert_equal\",{\"type\":\"str\",\"children\":[\"<p id='foo:bar'>\\n\"]},{\"type\":\"send\",\"children\":[null,\"render\",{\"type\":\"str\",\"children\":[\"%p#foo:bar/\"]}]}]}]}", "descriptions": [{"source": "method_name", "text": "tests colon in id attr"}]}
{"id": "129b687f20dae75b3ddca86580a29b60", "repo_name": "haml", "file_path": "./repos/haml/test/haml/helper_test.rb", "method_name": "test_rendering_with_escapes", "method_source": "def test_rendering_with_escapes; skip\n    def @base.render_something_with_haml_concat\n      haml_concat \"<p>\"\n    end\n    def @base.render_something_with_haml_tag_and_concat\n      haml_tag 'p' do\n        haml_concat '<foo>'\n      end\n    end\n\n    output = render(<<-HAML, :action_view)\n- render_something_with_haml_concat\n- render_something_with_haml_tag_and_concat\n- render_something_with_haml_concat\nHAML\n    assert_equal(\"&lt;p&gt;\\n<p>\\n  &lt;foo&gt;\\n</p>\\n&lt;p&gt;\\n\", output)\n  end", "ast_json": "{\"type\":\"def\",\"children\":[\"test_rendering_with_escapes\",{\"type\":\"args\",\"children\":[]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[null,\"skip\"]},{\"type\":\"defs\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@base\"]},\"render_something_with_haml_concat\",{\"type\":\"args\",\"children\":[]},{\"type\":\"send\",\"children\":[null,\"haml_concat\",{\"type\":\"str\",\"children\":[\"<p>\"]}]}]},{\"type\":\"defs\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@base\"]},\"render_something_with_haml_tag_and_concat\",{\"type\":\"args\",\"children\":[]},{\"type\":\"block\",\"children\":[{\"type\":\"send\",\"children\":[null,\"haml_tag\",{\"type\":\"str\",\"children\":[\"p\"]}]},{\"type\":\"args\",\"children\":[]},{\"type\":\"send\",\"children\":[null,\"haml_concat\",{\"type\":\"str\",\"children\":[\"<foo>\"]}]}]}]},{\"type\":\"lvasgn\",\"children\":[\"output\",{\"type\":\"send\",\"children\":[null,\"render\",{\"type\":\"dstr\",\"children\":[{\"type\":\"str\",\"children\":[\"- render_something_with_haml_concat\\n\"]},{\"type\":\"str\",\"children\":[\"- render_something_with_haml_tag_and_concat\\n\"]},{\"type\":\"str\",\"children\":[\"- render_something_with_haml_concat\\n\"]}]},{\"type\":\"sym\",\"children\":[\"action_view\"]}]}]},{\"type\":\"send\",\"children\":[null,\"assert_equal\",{\"type\":\"str\",\"children\":[\"&lt;p&gt;\\n<p>\\n  &lt;foo&gt;\\n</p>\\n&lt;p&gt;\\n\"]},{\"type\":\"lvar\",\"children\":[\"output\"]}]}]}]}", "descriptions": [{"source": "method_name", "text": "tests rendering with escapes"}]}
{"id": "66acb4057071a78b6355301ea65f3488", "repo_name": "gitlabhq", "file_path": "./repos/gitlabhq/lib/gitlab/tracking/standard_context.rb", "method_name": "instance_id", "method_source": "def instance_id\n        nil\n      end", "ast_json": "{\"type\":\"def\",\"children\":[\"instance_id\",{\"type\":\"args\",\"children\":[]},{\"type\":\"nil\",\"children\":[]}]}", "descriptions": [{"source": "method_name", "text": "instances id"}]}
{"id": "572c9ea0d443a3469e475eaf0397b018", "repo_name": "manageiq", "file_path": "./repos/manageiq/app/models/manageiq/providers/ansible_role_workflow.rb", "method_name": "adjust_options_for_git_checkout_tempdir!", "method_source": "def adjust_options_for_git_checkout_tempdir!\n    options[:roles_path] = File.join(options[:git_checkout_tempdir], options[:roles_relative_path])\n    save!\n  end", "ast_json": "{\"type\":\"def\",\"children\":[\"adjust_options_for_git_checkout_tempdir!\",{\"type\":\"args\",\"children\":[]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"options\"]},\"[]=\",{\"type\":\"sym\",\"children\":[\"roles_path\"]},{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"File\"]},\"join\",{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"options\"]},\"[]\",{\"type\":\"sym\",\"children\":[\"git_checkout_tempdir\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"options\"]},\"[]\",{\"type\":\"sym\",\"children\":[\"roles_relative_path\"]}]}]}]},{\"type\":\"send\",\"children\":[null,\"save!\"]}]}]}", "descriptions": [{"source": "method_name", "text": "adjusts options for git checkout tempdir!"}]}
{"id": "9b6c2af81e74d486718c0909a5c054cb", "repo_name": "rubocop", "file_path": "./repos/rubocop/lib/rubocop/cop/mixin/duplication.rb", "method_name": "grouped_duplicates", "method_source": "def grouped_duplicates(collection)\n        collection.group_by { |item| item }.values.reject(&:one?)\n      end", "ast_json": "{\"type\":\"def\",\"children\":[\"grouped_duplicates\",{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"collection\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"block\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"collection\"]},\"group_by\"]},{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"item\"]}]},{\"type\":\"lvar\",\"children\":[\"item\"]}]},\"values\"]},\"reject\",{\"type\":\"block_pass\",\"children\":[{\"type\":\"sym\",\"children\":[\"one?\"]}]}]}]}", "descriptions": [{"source": "method_name", "text": "groupeds duplicates"}]}
{"id": "b28e3a866ad9a8ac1a106e7a08f19fc6", "repo_name": "gitlabhq", "file_path": "./repos/gitlabhq/spec/lib/gitlab/database/partitioning/replace_table_spec.rb", "method_name": "partitions_for_parent_table", "method_source": "def partitions_for_parent_table(table)\n      Gitlab::Database::PostgresPartition.for_parent_table(table)\n    end", "ast_json": "{\"type\":\"def\",\"children\":[\"partitions_for_parent_table\",{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"table\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Gitlab\"]},\"Database\"]},\"PostgresPartition\"]},\"for_parent_table\",{\"type\":\"lvar\",\"children\":[\"table\"]}]}]}", "descriptions": [{"source": "method_name", "text": "partitionses for parent table"}]}
{"id": "60ff50bc44019c8cbb9bf9536c07a2a3", "repo_name": "gitlabhq", "file_path": "./repos/gitlabhq/app/models/integrations/chat_message/push_message.rb", "method_name": "commit_messages", "method_source": "def commit_messages\n        commits.map { |commit| compose_commit_message(commit) }.join(\"\\n\\n\")\n      end", "ast_json": "{\"type\":\"def\",\"children\":[\"commit_messages\",{\"type\":\"args\",\"children\":[]},{\"type\":\"send\",\"children\":[{\"type\":\"block\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"commits\"]},\"map\"]},{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"commit\"]}]},{\"type\":\"send\",\"children\":[null,\"compose_commit_message\",{\"type\":\"lvar\",\"children\":[\"commit\"]}]}]},\"join\",{\"type\":\"str\",\"children\":[\"\\n\\n\"]}]}]}", "descriptions": [{"source": "method_name", "text": "commits messages"}]}
{"id": "68555b95894f585e45cfd8116a27f186", "repo_name": "brakeman", "file_path": "./repos/brakeman/test/tests/rails4.rb", "method_name": "test_cross_site_scripting_CVE_2016_6316", "method_source": "def test_cross_site_scripting_CVE_2016_6316\n    assert_warning :type => :warning,\n      :warning_code => 102,\n      :fingerprint => \"263bacc3390a9dd1ddec7a7f5bbb609a837de55725571234708d2a3b83a017fe\",\n      :warning_type => \"Cross-Site Scripting\",\n      :line => 4,\n      :message => /^Rails\\ 4\\.0\\.0\\ `content_tag`\\ does\\ not\\ escape\\ /,\n      :confidence => 1,\n      :relative_path => \"Gemfile\",\n      :user_input => nil\n  end", "ast_json": "{\"type\":\"def\",\"children\":[\"test_cross_site_scripting_CVE_2016_6316\",{\"type\":\"args\",\"children\":[]},{\"type\":\"send\",\"children\":[null,\"assert_warning\",{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"type\"]},{\"type\":\"sym\",\"children\":[\"warning\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"warning_code\"]},{\"type\":\"int\",\"children\":[102]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"fingerprint\"]},{\"type\":\"str\",\"children\":[\"263bacc3390a9dd1ddec7a7f5bbb609a837de55725571234708d2a3b83a017fe\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"warning_type\"]},{\"type\":\"str\",\"children\":[\"Cross-Site Scripting\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"line\"]},{\"type\":\"int\",\"children\":[4]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"message\"]},{\"type\":\"regexp\",\"children\":[{\"type\":\"str\",\"children\":[\"^Rails\\\\ 4\\\\.0\\\\.0\\\\ `content_tag`\\\\ does\\\\ not\\\\ escape\\\\ \"]},{\"type\":\"regopt\",\"children\":[]}]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"confidence\"]},{\"type\":\"int\",\"children\":[1]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"relative_path\"]},{\"type\":\"str\",\"children\":[\"Gemfile\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"user_input\"]},{\"type\":\"nil\",\"children\":[]}]}]}]}]}", "descriptions": [{"source": "method_name", "text": "tests cross site scripting cve 2016 6316"}]}
{"id": "13c91b8064bc337a515a96228b33616e", "repo_name": "fluentd", "file_path": "./repos/fluentd/lib/fluent/plugin/in_tail/group_watch.rb", "method_name": "to_s", "method_source": "def to_s\n        super + \" current_paths: #{@current_paths} rate_period: #{@rate_period} limit: #{@limit}\"\n      end", "ast_json": "{\"type\":\"def\",\"children\":[\"to_s\",{\"type\":\"args\",\"children\":[]},{\"type\":\"send\",\"children\":[{\"type\":\"zsuper\",\"children\":[]},\"+\",{\"type\":\"dstr\",\"children\":[{\"type\":\"str\",\"children\":[\" current_paths: \"]},{\"type\":\"begin\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@current_paths\"]}]},{\"type\":\"str\",\"children\":[\" rate_period: \"]},{\"type\":\"begin\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@rate_period\"]}]},{\"type\":\"str\",\"children\":[\" limit: \"]},{\"type\":\"begin\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@limit\"]}]}]}]}]}", "descriptions": [{"source": "method_name", "text": "tos s"}]}
{"id": "a19754fb32c093510d92422a1e714d3e", "repo_name": "gitlabhq", "file_path": "./repos/gitlabhq/app/presenters/rapid_diffs/compare_presenter.rb", "method_name": "diff_file_endpoint", "method_source": "def diff_file_endpoint\n      diff_file_project_compare_index_path(resource.project, request_params)\n    end", "ast_json": "{\"type\":\"def\",\"children\":[\"diff_file_endpoint\",{\"type\":\"args\",\"children\":[]},{\"type\":\"send\",\"children\":[null,\"diff_file_project_compare_index_path\",{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"resource\"]},\"project\"]},{\"type\":\"send\",\"children\":[null,\"request_params\"]}]}]}", "descriptions": [{"source": "method_name", "text": "diffs file endpoint"}]}
{"id": "ba781bd88765df815592fbe51ea85204", "repo_name": "gitlabhq", "file_path": "./repos/gitlabhq/lib/gitlab/sidekiq_middleware/pause_control/pause_control_service.rb", "method_name": "initialize", "method_source": "def initialize(worker_name)\n          @worker_name = worker_name\n\n          worker_name = @worker_name.underscore\n          @redis_set_key = \"sidekiq:pause_control:paused_jobs:zset:{#{worker_name}}\"\n          @redis_score_key = \"sidekiq:pause_control:paused_jobs:score:{#{worker_name}}\"\n        end", "ast_json": "{\"type\":\"def\",\"children\":[\"initialize\",{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"worker_name\"]}]},{\"type\":\"begin\",\"children\":[{\"type\":\"ivasgn\",\"children\":[\"@worker_name\",{\"type\":\"lvar\",\"children\":[\"worker_name\"]}]},{\"type\":\"lvasgn\",\"children\":[\"worker_name\",{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@worker_name\"]},\"underscore\"]}]},{\"type\":\"ivasgn\",\"children\":[\"@redis_set_key\",{\"type\":\"dstr\",\"children\":[{\"type\":\"str\",\"children\":[\"sidekiq:pause_control:paused_jobs:zset:{\"]},{\"type\":\"begin\",\"children\":[{\"type\":\"lvar\",\"children\":[\"worker_name\"]}]},{\"type\":\"str\",\"children\":[\"}\"]}]}]},{\"type\":\"ivasgn\",\"children\":[\"@redis_score_key\",{\"type\":\"dstr\",\"children\":[{\"type\":\"str\",\"children\":[\"sidekiq:pause_control:paused_jobs:score:{\"]},{\"type\":\"begin\",\"children\":[{\"type\":\"lvar\",\"children\":[\"worker_name\"]}]},{\"type\":\"str\",\"children\":[\"}\"]}]}]}]}]}", "descriptions": [{"source": "method_name", "text": "initializes"}]}
{"id": "267ff5164f1ffc57dd54727cfb7aa444", "repo_name": "gitlabhq", "file_path": "./repos/gitlabhq/db/post_migrate/20240726051551_add_temp_index_on_name_version_pattern_to_packages_dependencies.rb", "method_name": "up", "method_source": "def up\n    # Temporary index to be removed in https://gitlab.com/gitlab-org/gitlab/-/issues/474578\n    add_concurrent_index(\n      :packages_dependencies,\n      %i[name version_pattern],\n      unique: true,\n      name: :tmp_idx_packages_dependencies_on_name_version_pattern,\n      where: 'project_id IS NULL'\n    )\n  end", "ast_json": "{\"type\":\"def\",\"children\":[\"up\",{\"type\":\"args\",\"children\":[]},{\"type\":\"send\",\"children\":[null,\"add_concurrent_index\",{\"type\":\"sym\",\"children\":[\"packages_dependencies\"]},{\"type\":\"array\",\"children\":[{\"type\":\"sym\",\"children\":[\"name\"]},{\"type\":\"sym\",\"children\":[\"version_pattern\"]}]},{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"unique\"]},{\"type\":\"true\",\"children\":[]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"name\"]},{\"type\":\"sym\",\"children\":[\"tmp_idx_packages_dependencies_on_name_version_pattern\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"where\"]},{\"type\":\"str\",\"children\":[\"project_id IS NULL\"]}]}]}]}]}", "descriptions": [{"source": "method_name", "text": "ups"}, {"source": "docstring", "text": "Temporary index to be removed in https://gitlab.com/gitlab-org/gitlab/-/issues/474578"}]}
{"id": "8f135c35cbc413dc4d5483731f45e7bb", "repo_name": "rails", "file_path": "./repos/rails/activerecord/test/cases/finder_test.rb", "method_name": "test_find_with_ids_with_limit_and_order_clause", "method_source": "def test_find_with_ids_with_limit_and_order_clause\n    # The order clause takes precedence over the informed ids\n    records = Topic.limit(2).order(:id).find([5, 3, 1])\n    assert_equal 2, records.size\n    assert_equal \"The First Topic\",            records[0].title\n    assert_equal \"The Third Topic of the day\", records[1].title\n  end", "ast_json": "{\"type\":\"def\",\"children\":[\"test_find_with_ids_with_limit_and_order_clause\",{\"type\":\"args\",\"children\":[]},{\"type\":\"begin\",\"children\":[{\"type\":\"lvasgn\",\"children\":[\"records\",{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Topic\"]},\"limit\",{\"type\":\"int\",\"children\":[2]}]},\"order\",{\"type\":\"sym\",\"children\":[\"id\"]}]},\"find\",{\"type\":\"array\",\"children\":[{\"type\":\"int\",\"children\":[5]},{\"type\":\"int\",\"children\":[3]},{\"type\":\"int\",\"children\":[1]}]}]}]},{\"type\":\"send\",\"children\":[null,\"assert_equal\",{\"type\":\"int\",\"children\":[2]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"records\"]},\"size\"]}]},{\"type\":\"send\",\"children\":[null,\"assert_equal\",{\"type\":\"str\",\"children\":[\"The First Topic\"]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"records\"]},\"[]\",{\"type\":\"int\",\"children\":[0]}]},\"title\"]}]},{\"type\":\"send\",\"children\":[null,\"assert_equal\",{\"type\":\"str\",\"children\":[\"The Third Topic of the day\"]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"records\"]},\"[]\",{\"type\":\"int\",\"children\":[1]}]},\"title\"]}]}]}]}", "descriptions": [{"source": "method_name", "text": "tests find with ids with limit and order clause"}, {"source": "docstring", "text": "The order clause takes precedence over the informed ids"}]}
{"id": "e8a4d6c3a3e26b0f4542dea8d758f068", "repo_name": "fluentd", "file_path": "./repos/fluentd/lib/fluent/event_router.rb", "method_name": "emit_stream", "method_source": "def emit_stream(tag, es)\n      match(tag).emit_events(tag, es)\n      if callback = find_callback\n        callback.call(es)\n      end\n    rescue Pipeline::OutputError => e\n      @emit_error_handler.handle_emits_error(tag, e.processed_es, e.internal_error)\n    rescue => e\n      @emit_error_handler.handle_emits_error(tag, es, e)\n    end", "ast_json": "{\"type\":\"def\",\"children\":[\"emit_stream\",{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"tag\"]},{\"type\":\"arg\",\"children\":[\"es\"]}]},{\"type\":\"rescue\",\"children\":[{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"match\",{\"type\":\"lvar\",\"children\":[\"tag\"]}]},\"emit_events\",{\"type\":\"lvar\",\"children\":[\"tag\"]},{\"type\":\"lvar\",\"children\":[\"es\"]}]},{\"type\":\"if\",\"children\":[{\"type\":\"lvasgn\",\"children\":[\"callback\",{\"type\":\"send\",\"children\":[null,\"find_callback\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"callback\"]},\"call\",{\"type\":\"lvar\",\"children\":[\"es\"]}]},null]}]},{\"type\":\"resbody\",\"children\":[{\"type\":\"array\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Pipeline\"]},\"OutputError\"]}]},{\"type\":\"lvasgn\",\"children\":[\"e\"]},{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@emit_error_handler\"]},\"handle_emits_error\",{\"type\":\"lvar\",\"children\":[\"tag\"]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"e\"]},\"processed_es\"]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"e\"]},\"internal_error\"]}]}]},{\"type\":\"resbody\",\"children\":[null,{\"type\":\"lvasgn\",\"children\":[\"e\"]},{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@emit_error_handler\"]},\"handle_emits_error\",{\"type\":\"lvar\",\"children\":[\"tag\"]},{\"type\":\"lvar\",\"children\":[\"es\"]},{\"type\":\"lvar\",\"children\":[\"e\"]}]}]},null]}]}", "descriptions": [{"source": "method_name", "text": "emits stream"}]}
