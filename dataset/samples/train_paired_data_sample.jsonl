{"id": "7850bd26751834fc6365e48b5a3f7dd5", "repo_name": "hanami", "file_path": "./repos/hanami/lib/hanami/extensions/view/slice_configured_context.rb", "method_name": "resolve_routes", "method_source": "def resolve_routes\n          slice[\"routes\"] if slice.key?(\"routes\")\n        end", "ast_json": "{\"type\":\"def\",\"children\":[\"resolve_routes\",{\"type\":\"args\",\"children\":[]},{\"type\":\"if\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"slice\"]},\"key?\",{\"type\":\"str\",\"children\":[\"routes\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"slice\"]},\"[]\",{\"type\":\"str\",\"children\":[\"routes\"]}]},null]}]}", "descriptions": [{"source": "method_name", "text": "resolves routes"}]}
{"id": "c812e1014c73e31c71b8164823dcbe60", "repo_name": "haml", "file_path": "./repos/haml/benchmark/etc/real_sample.rb", "method_name": "link_to", "method_source": "def link_to(a, b, *c)\n  \"<a href='\" << b << \">\".freeze << a << '</div>'.freeze\nend", "ast_json": "{\"type\":\"def\",\"children\":[\"link_to\",{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"a\"]},{\"type\":\"arg\",\"children\":[\"b\"]},{\"type\":\"restarg\",\"children\":[\"c\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"str\",\"children\":[\"<a href='\"]},\"<<\",{\"type\":\"lvar\",\"children\":[\"b\"]}]},\"<<\",{\"type\":\"send\",\"children\":[{\"type\":\"str\",\"children\":[\">\"]},\"freeze\"]}]},\"<<\",{\"type\":\"lvar\",\"children\":[\"a\"]}]},\"<<\",{\"type\":\"send\",\"children\":[{\"type\":\"str\",\"children\":[\"</div>\"]},\"freeze\"]}]}]}", "descriptions": [{"source": "method_name", "text": "links to"}]}
{"id": "0f3f859b3ae65cf5a12ffec2b9e22ab7", "repo_name": "rails", "file_path": "./repos/rails/activesupport/test/testing/constant_lookup_test.rb", "method_name": "test_returns_nil_when_cant_find_foo", "method_source": "def test_returns_nil_when_cant_find_foo\n    assert_nil find_foo(\"DoesntExist\")\n    assert_nil find_foo(\"DoesntExistTest\")\n    assert_nil find_foo(\"DoesntExist::Nadda\")\n    assert_nil find_foo(\"DoesntExist::Nadda::Nope\")\n    assert_nil find_foo(\"DoesntExist::Nadda::Nope::NotHere\")\n  end", "ast_json": "{\"type\":\"def\",\"children\":[\"test_returns_nil_when_cant_find_foo\",{\"type\":\"args\",\"children\":[]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[null,\"assert_nil\",{\"type\":\"send\",\"children\":[null,\"find_foo\",{\"type\":\"str\",\"children\":[\"DoesntExist\"]}]}]},{\"type\":\"send\",\"children\":[null,\"assert_nil\",{\"type\":\"send\",\"children\":[null,\"find_foo\",{\"type\":\"str\",\"children\":[\"DoesntExistTest\"]}]}]},{\"type\":\"send\",\"children\":[null,\"assert_nil\",{\"type\":\"send\",\"children\":[null,\"find_foo\",{\"type\":\"str\",\"children\":[\"DoesntExist::Nadda\"]}]}]},{\"type\":\"send\",\"children\":[null,\"assert_nil\",{\"type\":\"send\",\"children\":[null,\"find_foo\",{\"type\":\"str\",\"children\":[\"DoesntExist::Nadda::Nope\"]}]}]},{\"type\":\"send\",\"children\":[null,\"assert_nil\",{\"type\":\"send\",\"children\":[null,\"find_foo\",{\"type\":\"str\",\"children\":[\"DoesntExist::Nadda::Nope::NotHere\"]}]}]}]}]}", "descriptions": [{"source": "method_name", "text": "tests returns nil when cant find foo"}]}
{"id": "0bad8e90b190db2bbf8eae0aa5cc347d", "repo_name": "gitlabhq", "file_path": "./repos/gitlabhq/app/controllers/admin/sessions_controller.rb", "method_name": "new", "method_source": "def new\n    if current_user_mode.admin_mode?\n      redirect_to redirect_path, notice: _('Admin mode already enabled')\n    else\n      current_user_mode.request_admin_mode! unless current_user_mode.admin_mode_requested?\n      store_location_for(:redirect, redirect_path)\n    end\n  end", "ast_json": "{\"type\":\"def\",\"children\":[\"new\",{\"type\":\"args\",\"children\":[]},{\"type\":\"if\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"current_user_mode\"]},\"admin_mode?\"]},{\"type\":\"send\",\"children\":[null,\"redirect_to\",{\"type\":\"send\",\"children\":[null,\"redirect_path\"]},{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"notice\"]},{\"type\":\"send\",\"children\":[null,\"_\",{\"type\":\"str\",\"children\":[\"Admin mode already enabled\"]}]}]}]}]},{\"type\":\"begin\",\"children\":[{\"type\":\"if\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"current_user_mode\"]},\"admin_mode_requested?\"]},null,{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"current_user_mode\"]},\"request_admin_mode!\"]}]},{\"type\":\"send\",\"children\":[null,\"store_location_for\",{\"type\":\"sym\",\"children\":[\"redirect\"]},{\"type\":\"send\",\"children\":[null,\"redirect_path\"]}]}]}]}]}", "descriptions": [{"source": "method_name", "text": "news"}]}
{"id": "9508185873b70c3daf1804698d4fde28", "repo_name": "discourse", "file_path": "./repos/discourse/app/models/group.rb", "method_name": "name_cannot_be_reserved", "method_source": "def name_cannot_be_reserved\n    if RESERVED_NAMES.include?(name.to_s.downcase)\n      errors.add(:name, I18n.t(\"activerecord.errors.messages.reserved\", name: name))\n    end\n  end", "ast_json": "{\"type\":\"def\",\"children\":[\"name_cannot_be_reserved\",{\"type\":\"args\",\"children\":[]},{\"type\":\"if\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"RESERVED_NAMES\"]},\"include?\",{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"name\"]},\"to_s\"]},\"downcase\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"errors\"]},\"add\",{\"type\":\"sym\",\"children\":[\"name\"]},{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"I18n\"]},\"t\",{\"type\":\"str\",\"children\":[\"activerecord.errors.messages.reserved\"]},{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"name\"]},{\"type\":\"send\",\"children\":[null,\"name\"]}]}]}]}]},null]}]}", "descriptions": [{"source": "method_name", "text": "names cannot be reserved"}, {"source": "test_description", "text": "uses the localized name if name has not been taken"}, {"source": "test_description", "text": "does not use the localized name if name has already been taken"}]}
{"id": "2f5ec2ffd573d40845897a8c9f64cb87", "repo_name": "rails", "file_path": "./repos/rails/activerecord/lib/active_record/connection_adapters/postgresql/schema_statements.rb", "method_name": "remove_index", "method_source": "def remove_index(table_name, column_name = nil, **options) # :nodoc:\n          table = Utils.extract_schema_qualified_name(table_name.to_s)\n\n          if options.key?(:name)\n            provided_index = Utils.extract_schema_qualified_name(options[:name].to_s)\n\n            options[:name] = provided_index.identifier\n            table = PostgreSQL::Name.new(provided_index.schema, table.identifier) unless table.schema.present?\n\n            if provided_index.schema.present? && table.schema != provided_index.schema\n              raise ArgumentError.new(\"Index schema '#{provided_index.schema}' does not match table schema '#{table.schema}'\")\n            end\n          end\n\n          return if options[:if_exists] && !index_exists?(table_name, column_name, **options)\n\n          index_to_remove = PostgreSQL::Name.new(table.schema, index_name_for_remove(table.to_s, column_name, options))\n\n          execute \"DROP INDEX #{index_algorithm(options[:algorithm])} #{quote_table_name(index_to_remove)}\"\n        end", "ast_json": "{\"type\":\"def\",\"children\":[\"remove_index\",{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"table_name\"]},{\"type\":\"optarg\",\"children\":[\"column_name\",{\"type\":\"nil\",\"children\":[]}]},{\"type\":\"kwrestarg\",\"children\":[\"options\"]}]},{\"type\":\"begin\",\"children\":[{\"type\":\"lvasgn\",\"children\":[\"table\",{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Utils\"]},\"extract_schema_qualified_name\",{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"table_name\"]},\"to_s\"]}]}]},{\"type\":\"if\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"options\"]},\"key?\",{\"type\":\"sym\",\"children\":[\"name\"]}]},{\"type\":\"begin\",\"children\":[{\"type\":\"lvasgn\",\"children\":[\"provided_index\",{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Utils\"]},\"extract_schema_qualified_name\",{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"options\"]},\"[]\",{\"type\":\"sym\",\"children\":[\"name\"]}]},\"to_s\"]}]}]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"options\"]},\"[]=\",{\"type\":\"sym\",\"children\":[\"name\"]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"provided_index\"]},\"identifier\"]}]},{\"type\":\"if\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"table\"]},\"schema\"]},\"present?\"]},null,{\"type\":\"lvasgn\",\"children\":[\"table\",{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"PostgreSQL\"]},\"Name\"]},\"new\",{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"provided_index\"]},\"schema\"]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"table\"]},\"identifier\"]}]}]}]},{\"type\":\"if\",\"children\":[{\"type\":\"and\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"provided_index\"]},\"schema\"]},\"present?\"]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"table\"]},\"schema\"]},\"!=\",{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"provided_index\"]},\"schema\"]}]}]},{\"type\":\"send\",\"children\":[null,\"raise\",{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"ArgumentError\"]},\"new\",{\"type\":\"dstr\",\"children\":[{\"type\":\"str\",\"children\":[\"Index schema '\"]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"provided_index\"]},\"schema\"]}]},{\"type\":\"str\",\"children\":[\"' does not match table schema '\"]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"table\"]},\"schema\"]}]},{\"type\":\"str\",\"children\":[\"'\"]}]}]}]},null]}]},null]},{\"type\":\"if\",\"children\":[{\"type\":\"and\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"options\"]},\"[]\",{\"type\":\"sym\",\"children\":[\"if_exists\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"index_exists?\",{\"type\":\"lvar\",\"children\":[\"table_name\"]},{\"type\":\"lvar\",\"children\":[\"column_name\"]},{\"type\":\"hash\",\"children\":[{\"type\":\"kwsplat\",\"children\":[{\"type\":\"lvar\",\"children\":[\"options\"]}]}]}]},\"!\"]}]},{\"type\":\"return\",\"children\":[]},null]},{\"type\":\"lvasgn\",\"children\":[\"index_to_remove\",{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"PostgreSQL\"]},\"Name\"]},\"new\",{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"table\"]},\"schema\"]},{\"type\":\"send\",\"children\":[null,\"index_name_for_remove\",{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"table\"]},\"to_s\"]},{\"type\":\"lvar\",\"children\":[\"column_name\"]},{\"type\":\"lvar\",\"children\":[\"options\"]}]}]}]},{\"type\":\"send\",\"children\":[null,\"execute\",{\"type\":\"dstr\",\"children\":[{\"type\":\"str\",\"children\":[\"DROP INDEX \"]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[null,\"index_algorithm\",{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"options\"]},\"[]\",{\"type\":\"sym\",\"children\":[\"algorithm\"]}]}]}]},{\"type\":\"str\",\"children\":[\" \"]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[null,\"quote_table_name\",{\"type\":\"lvar\",\"children\":[\"index_to_remove\"]}]}]}]}]}]}]}", "descriptions": [{"source": "method_name", "text": "removes index"}]}
{"id": "0f19f1e83bb0072c862a74570da828f0", "repo_name": "gitlabhq", "file_path": "./repos/gitlabhq/app/graphql/mutations/alert_management/alerts/set_assignees.rb", "method_name": "set_assignees", "method_source": "def set_assignees(alert, assignee_usernames, operation_mode)\n          operation_mode ||= Types::MutationOperationModeEnum.enum[:replace]\n\n          original_assignees = alert.assignees\n          target_users = find_target_users(assignee_usernames)\n\n          assignees = case Types::MutationOperationModeEnum.enum.key(operation_mode).to_sym\n                      when :replace then target_users.uniq\n                      when :append then (original_assignees + target_users).uniq\n                      when :remove then (original_assignees - target_users)\n                      end\n\n          ::AlertManagement::Alerts::UpdateService.new(alert, current_user, assignees: assignees).execute\n        end", "ast_json": "{\"type\":\"def\",\"children\":[\"set_assignees\",{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"alert\"]},{\"type\":\"arg\",\"children\":[\"assignee_usernames\"]},{\"type\":\"arg\",\"children\":[\"operation_mode\"]}]},{\"type\":\"begin\",\"children\":[{\"type\":\"or_asgn\",\"children\":[{\"type\":\"lvasgn\",\"children\":[\"operation_mode\"]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Types\"]},\"MutationOperationModeEnum\"]},\"enum\"]},\"[]\",{\"type\":\"sym\",\"children\":[\"replace\"]}]}]},{\"type\":\"lvasgn\",\"children\":[\"original_assignees\",{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"alert\"]},\"assignees\"]}]},{\"type\":\"lvasgn\",\"children\":[\"target_users\",{\"type\":\"send\",\"children\":[null,\"find_target_users\",{\"type\":\"lvar\",\"children\":[\"assignee_usernames\"]}]}]},{\"type\":\"lvasgn\",\"children\":[\"assignees\",{\"type\":\"case\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Types\"]},\"MutationOperationModeEnum\"]},\"enum\"]},\"key\",{\"type\":\"lvar\",\"children\":[\"operation_mode\"]}]},\"to_sym\"]},{\"type\":\"when\",\"children\":[{\"type\":\"sym\",\"children\":[\"replace\"]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"target_users\"]},\"uniq\"]}]},{\"type\":\"when\",\"children\":[{\"type\":\"sym\",\"children\":[\"append\"]},{\"type\":\"send\",\"children\":[{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"original_assignees\"]},\"+\",{\"type\":\"lvar\",\"children\":[\"target_users\"]}]}]},\"uniq\"]}]},{\"type\":\"when\",\"children\":[{\"type\":\"sym\",\"children\":[\"remove\"]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"original_assignees\"]},\"-\",{\"type\":\"lvar\",\"children\":[\"target_users\"]}]}]}]},null]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"cbase\",\"children\":[]},\"AlertManagement\"]},\"Alerts\"]},\"UpdateService\"]},\"new\",{\"type\":\"lvar\",\"children\":[\"alert\"]},{\"type\":\"send\",\"children\":[null,\"current_user\"]},{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"assignees\"]},{\"type\":\"lvar\",\"children\":[\"assignees\"]}]}]}]},\"execute\"]}]}]}", "descriptions": [{"source": "method_name", "text": "sets assignees"}]}
{"id": "a15412372830155fb2faf340af4ad1a8", "repo_name": "mastodon", "file_path": "./repos/mastodon/config/initializers/simple_form.rb", "method_name": "recommended", "method_source": "def recommended(_wrapper_options = nil)\n    return unless options[:recommended]\n\n    key = options[:recommended].is_a?(Symbol) ? options[:recommended] : :recommended\n    options[:label_text] = ->(raw_label_text, _required_label_text, _label_present) { safe_join([raw_label_text, ' ', content_tag(:span, I18n.t(key, scope: 'simple_form'), class: key)]) }\n\n    nil\n  end", "ast_json": "{\"type\":\"def\",\"children\":[\"recommended\",{\"type\":\"args\",\"children\":[{\"type\":\"optarg\",\"children\":[\"_wrapper_options\",{\"type\":\"nil\",\"children\":[]}]}]},{\"type\":\"begin\",\"children\":[{\"type\":\"if\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"options\"]},\"[]\",{\"type\":\"sym\",\"children\":[\"recommended\"]}]},null,{\"type\":\"return\",\"children\":[]}]},{\"type\":\"lvasgn\",\"children\":[\"key\",{\"type\":\"if\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"options\"]},\"[]\",{\"type\":\"sym\",\"children\":[\"recommended\"]}]},\"is_a?\",{\"type\":\"const\",\"children\":[null,\"Symbol\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"options\"]},\"[]\",{\"type\":\"sym\",\"children\":[\"recommended\"]}]},{\"type\":\"sym\",\"children\":[\"recommended\"]}]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"options\"]},\"[]=\",{\"type\":\"sym\",\"children\":[\"label_text\"]},{\"type\":\"block\",\"children\":[{\"type\":\"send\",\"children\":[null,\"lambda\"]},{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"raw_label_text\"]},{\"type\":\"arg\",\"children\":[\"_required_label_text\"]},{\"type\":\"arg\",\"children\":[\"_label_present\"]}]},{\"type\":\"send\",\"children\":[null,\"safe_join\",{\"type\":\"array\",\"children\":[{\"type\":\"lvar\",\"children\":[\"raw_label_text\"]},{\"type\":\"str\",\"children\":[\" \"]},{\"type\":\"send\",\"children\":[null,\"content_tag\",{\"type\":\"sym\",\"children\":[\"span\"]},{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"I18n\"]},\"t\",{\"type\":\"lvar\",\"children\":[\"key\"]},{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"scope\"]},{\"type\":\"str\",\"children\":[\"simple_form\"]}]}]}]},{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"class\"]},{\"type\":\"lvar\",\"children\":[\"key\"]}]}]}]}]}]}]}]},{\"type\":\"nil\",\"children\":[]}]}]}", "descriptions": [{"source": "method_name", "text": "recommendeds"}]}
{"id": "ee615a646b3e1ee7efa4a3ff5b372fb1", "repo_name": "gitlabhq", "file_path": "./repos/gitlabhq/lib/gitlab/git/diff_stats_collection.rb", "method_name": "initialize", "method_source": "def initialize(diff_stats)\n        @collection = diff_stats\n      end", "ast_json": "{\"type\":\"def\",\"children\":[\"initialize\",{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"diff_stats\"]}]},{\"type\":\"ivasgn\",\"children\":[\"@collection\",{\"type\":\"lvar\",\"children\":[\"diff_stats\"]}]}]}", "descriptions": [{"source": "method_name", "text": "initializes"}]}
{"id": "d920467a6188b46686702df68b5ce207", "repo_name": "gitlabhq", "file_path": "./repos/gitlabhq/qa/qa/resource/user.rb", "method_name": "last_name", "method_source": "def last_name\n        name.split(' ').drop(1).join(' ')\n      end", "ast_json": "{\"type\":\"def\",\"children\":[\"last_name\",{\"type\":\"args\",\"children\":[]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"name\"]},\"split\",{\"type\":\"str\",\"children\":[\" \"]}]},\"drop\",{\"type\":\"int\",\"children\":[1]}]},\"join\",{\"type\":\"str\",\"children\":[\" \"]}]}]}", "descriptions": [{"source": "method_name", "text": "lasts name"}]}
{"id": "205da784c868c2b9acaaf3fac4b033f6", "repo_name": "puma", "file_path": "./repos/puma/lib/puma/minissl.rb", "method_name": "check", "method_source": "def check\n          raise \"Key not configured\" if @key.nil? && @key_pem.nil?\n          raise \"Cert not configured\" if @cert.nil? && @cert_pem.nil?\n        end", "ast_json": "{\"type\":\"def\",\"children\":[\"check\",{\"type\":\"args\",\"children\":[]},{\"type\":\"begin\",\"children\":[{\"type\":\"if\",\"children\":[{\"type\":\"and\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@key\"]},\"nil?\"]},{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@key_pem\"]},\"nil?\"]}]},{\"type\":\"send\",\"children\":[null,\"raise\",{\"type\":\"str\",\"children\":[\"Key not configured\"]}]},null]},{\"type\":\"if\",\"children\":[{\"type\":\"and\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@cert\"]},\"nil?\"]},{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@cert_pem\"]},\"nil?\"]}]},{\"type\":\"send\",\"children\":[null,\"raise\",{\"type\":\"str\",\"children\":[\"Cert not configured\"]}]},null]}]}]}", "descriptions": [{"source": "method_name", "text": "checks"}]}
{"id": "76592e81990e137d670ee336a8f60470", "repo_name": "discourse", "file_path": "./repos/discourse/plugins/chat/app/services/chat/publisher.rb", "method_name": "publish_kick_users", "method_source": "def self.publish_kick_users(channel_id, user_ids)\n      MessageBus.publish(\n        kick_users_message_bus_channel(channel_id),\n        { channel_id: channel_id },\n        user_ids: user_ids,\n      )\n    end", "ast_json": "{\"type\":\"defs\",\"children\":[{\"type\":\"self\",\"children\":[]},\"publish_kick_users\",{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"channel_id\"]},{\"type\":\"arg\",\"children\":[\"user_ids\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"MessageBus\"]},\"publish\",{\"type\":\"send\",\"children\":[null,\"kick_users_message_bus_channel\",{\"type\":\"lvar\",\"children\":[\"channel_id\"]}]},{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"channel_id\"]},{\"type\":\"lvar\",\"children\":[\"channel_id\"]}]}]},{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"user_ids\"]},{\"type\":\"lvar\",\"children\":[\"user_ids\"]}]}]}]}]}", "descriptions": [{"source": "method_name", "text": "publishes kick users"}]}
{"id": "a83d499863922ba987c15aad43c84b20", "repo_name": "mastodon", "file_path": "./repos/mastodon/lib/paperclip/type_corrector.rb", "method_name": "make", "method_source": "def make\n      return @file unless options[:format]\n\n      target_extension = \".#{options[:format]}\"\n      extension        = File.extname(attachment.instance_read(:file_name))\n\n      return @file unless options[:style] == :original && target_extension && extension != target_extension\n\n      attachment.instance_write(:content_type, options[:content_type] || attachment.instance_read(:content_type))\n      attachment.instance_write(:file_name, File.basename(attachment.instance_read(:file_name), '.*') + target_extension)\n\n      @file\n    end", "ast_json": "{\"type\":\"def\",\"children\":[\"make\",{\"type\":\"args\",\"children\":[]},{\"type\":\"begin\",\"children\":[{\"type\":\"if\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"options\"]},\"[]\",{\"type\":\"sym\",\"children\":[\"format\"]}]},null,{\"type\":\"return\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@file\"]}]}]},{\"type\":\"lvasgn\",\"children\":[\"target_extension\",{\"type\":\"dstr\",\"children\":[{\"type\":\"str\",\"children\":[\".\"]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"options\"]},\"[]\",{\"type\":\"sym\",\"children\":[\"format\"]}]}]}]}]},{\"type\":\"lvasgn\",\"children\":[\"extension\",{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"File\"]},\"extname\",{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"attachment\"]},\"instance_read\",{\"type\":\"sym\",\"children\":[\"file_name\"]}]}]}]},{\"type\":\"if\",\"children\":[{\"type\":\"and\",\"children\":[{\"type\":\"and\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"options\"]},\"[]\",{\"type\":\"sym\",\"children\":[\"style\"]}]},\"==\",{\"type\":\"sym\",\"children\":[\"original\"]}]},{\"type\":\"lvar\",\"children\":[\"target_extension\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"extension\"]},\"!=\",{\"type\":\"lvar\",\"children\":[\"target_extension\"]}]}]},null,{\"type\":\"return\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@file\"]}]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"attachment\"]},\"instance_write\",{\"type\":\"sym\",\"children\":[\"content_type\"]},{\"type\":\"or\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"options\"]},\"[]\",{\"type\":\"sym\",\"children\":[\"content_type\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"attachment\"]},\"instance_read\",{\"type\":\"sym\",\"children\":[\"content_type\"]}]}]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"attachment\"]},\"instance_write\",{\"type\":\"sym\",\"children\":[\"file_name\"]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"File\"]},\"basename\",{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"attachment\"]},\"instance_read\",{\"type\":\"sym\",\"children\":[\"file_name\"]}]},{\"type\":\"str\",\"children\":[\".*\"]}]},\"+\",{\"type\":\"lvar\",\"children\":[\"target_extension\"]}]}]},{\"type\":\"ivar\",\"children\":[\"@file\"]}]}]}", "descriptions": [{"source": "method_name", "text": "makes"}]}
{"id": "18174dd68a1f541adfaa07d10229def9", "repo_name": "gitlabhq", "file_path": "./repos/gitlabhq/lib/system_check/app/database_config_exists_check.rb", "method_name": "check?", "method_source": "def check?\n        database_config_file = Rails.root.join('config', 'database.yml')\n\n        File.exist?(database_config_file)\n      end", "ast_json": "{\"type\":\"def\",\"children\":[\"check?\",{\"type\":\"args\",\"children\":[]},{\"type\":\"begin\",\"children\":[{\"type\":\"lvasgn\",\"children\":[\"database_config_file\",{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Rails\"]},\"root\"]},\"join\",{\"type\":\"str\",\"children\":[\"config\"]},{\"type\":\"str\",\"children\":[\"database.yml\"]}]}]},{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"File\"]},\"exist?\",{\"type\":\"lvar\",\"children\":[\"database_config_file\"]}]}]}]}", "descriptions": [{"source": "method_name", "text": "check?s"}]}
{"id": "d5408f954a14e8098647563ce81845fc", "repo_name": "identity_cache", "file_path": "./repos/identity_cache/test/normalized_has_one_test.rb", "method_name": "test_saving_the_child_in_a_transaction_should_expire_the_new_and_old_parents_cache_blob", "method_source": "def test_saving_the_child_in_a_transaction_should_expire_the_new_and_old_parents_cache_blob\n    @new_record = Item.create\n    @baz.item_id = @new_record.id\n\n    @baz.transaction do\n      IdentityCache.cache.expects(:delete).with(@record.primary_cache_index_key)\n      IdentityCache.cache.expects(:delete).with(@new_record.primary_cache_index_key)\n      IdentityCache.cache.expects(:delete).with(@baz.primary_cache_index_key)\n\n      @baz.save!\n      @baz.reload\n    end\n\n    assert_nil(Item.fetch(@record.id).cached_associated_id)\n    assert_nil(Item.fetch(@record.id).fetch_associated)\n  end", "ast_json": "{\"type\":\"def\",\"children\":[\"test_saving_the_child_in_a_transaction_should_expire_the_new_and_old_parents_cache_blob\",{\"type\":\"args\",\"children\":[]},{\"type\":\"begin\",\"children\":[{\"type\":\"ivasgn\",\"children\":[\"@new_record\",{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Item\"]},\"create\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@baz\"]},\"item_id=\",{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@new_record\"]},\"id\"]}]},{\"type\":\"block\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@baz\"]},\"transaction\"]},{\"type\":\"args\",\"children\":[]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"IdentityCache\"]},\"cache\"]},\"expects\",{\"type\":\"sym\",\"children\":[\"delete\"]}]},\"with\",{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@record\"]},\"primary_cache_index_key\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"IdentityCache\"]},\"cache\"]},\"expects\",{\"type\":\"sym\",\"children\":[\"delete\"]}]},\"with\",{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@new_record\"]},\"primary_cache_index_key\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"IdentityCache\"]},\"cache\"]},\"expects\",{\"type\":\"sym\",\"children\":[\"delete\"]}]},\"with\",{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@baz\"]},\"primary_cache_index_key\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@baz\"]},\"save!\"]},{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@baz\"]},\"reload\"]}]}]},{\"type\":\"send\",\"children\":[null,\"assert_nil\",{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Item\"]},\"fetch\",{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@record\"]},\"id\"]}]},\"cached_associated_id\"]}]},{\"type\":\"send\",\"children\":[null,\"assert_nil\",{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Item\"]},\"fetch\",{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@record\"]},\"id\"]}]},\"fetch_associated\"]}]}]}]}", "descriptions": [{"source": "method_name", "text": "tests saving the child in a transaction should expire the new and old parents cache blob"}]}
{"id": "05069cead22d86f61f6d8f43aa98b477", "repo_name": "manageiq", "file_path": "./repos/manageiq/app/models/cloud_volume_snapshot.rb", "method_name": "delete_snapshot", "method_source": "def delete_snapshot\n    raw_delete_snapshot\n  rescue => e\n    notification_options = {\n      :snapshot_op => 'delete',\n      :subject     => \"[#{name}]\",\n      :error       => e.to_s\n    }\n    Notification.create(:type => :vm_snapshot_failure, :options => notification_options)\n\n    raise e\n  end", "ast_json": "{\"type\":\"def\",\"children\":[\"delete_snapshot\",{\"type\":\"args\",\"children\":[]},{\"type\":\"rescue\",\"children\":[{\"type\":\"send\",\"children\":[null,\"raw_delete_snapshot\"]},{\"type\":\"resbody\",\"children\":[null,{\"type\":\"lvasgn\",\"children\":[\"e\"]},{\"type\":\"begin\",\"children\":[{\"type\":\"lvasgn\",\"children\":[\"notification_options\",{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"snapshot_op\"]},{\"type\":\"str\",\"children\":[\"delete\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"subject\"]},{\"type\":\"dstr\",\"children\":[{\"type\":\"str\",\"children\":[\"[\"]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[null,\"name\"]}]},{\"type\":\"str\",\"children\":[\"]\"]}]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"error\"]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"e\"]},\"to_s\"]}]}]}]},{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Notification\"]},\"create\",{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"type\"]},{\"type\":\"sym\",\"children\":[\"vm_snapshot_failure\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"options\"]},{\"type\":\"lvar\",\"children\":[\"notification_options\"]}]}]}]},{\"type\":\"send\",\"children\":[null,\"raise\",{\"type\":\"lvar\",\"children\":[\"e\"]}]}]}]},null]}]}", "descriptions": [{"source": "method_name", "text": "deletes snapshot"}, {"source": "test_description", "text": "queues a delete task with delete_snapshot_queue"}]}
{"id": "f420729d78b17af12e259b961282cfc9", "repo_name": "rails", "file_path": "./repos/rails/activerecord/lib/arel/visitors/to_sql.rb", "method_name": "visit_Arel_Nodes_Avg", "method_source": "def visit_Arel_Nodes_Avg(o, collector)\n          aggregate \"AVG\", o, collector\n        end", "ast_json": "{\"type\":\"def\",\"children\":[\"visit_Arel_Nodes_Avg\",{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"o\"]},{\"type\":\"arg\",\"children\":[\"collector\"]}]},{\"type\":\"send\",\"children\":[null,\"aggregate\",{\"type\":\"str\",\"children\":[\"AVG\"]},{\"type\":\"lvar\",\"children\":[\"o\"]},{\"type\":\"lvar\",\"children\":[\"collector\"]}]}]}", "descriptions": [{"source": "method_name", "text": "visits arel nodes avg"}]}
{"id": "8f92d479f4a17816c4ee53b283ec4b59", "repo_name": "fastlane", "file_path": "./repos/fastlane/fastlane/lib/fastlane/actions/get_version_number.rb", "method_name": "category", "method_source": "def self.category\n        :project\n      end", "ast_json": "{\"type\":\"defs\",\"children\":[{\"type\":\"self\",\"children\":[]},\"category\",{\"type\":\"args\",\"children\":[]},{\"type\":\"sym\",\"children\":[\"project\"]}]}", "descriptions": [{"source": "method_name", "text": "categories"}]}
{"id": "c4bccd25fb971fbcbb04209fafb35150", "repo_name": "fastlane", "file_path": "./repos/fastlane/fastlane_core/lib/fastlane_core/ui/interface.rb", "method_name": "password", "method_source": "def password(_message)\n      not_implemented(__method__)\n    end", "ast_json": "{\"type\":\"def\",\"children\":[\"password\",{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"_message\"]}]},{\"type\":\"send\",\"children\":[null,\"not_implemented\",{\"type\":\"send\",\"children\":[null,\"__method__\"]}]}]}", "descriptions": [{"source": "method_name", "text": "passwords"}]}
{"id": "d2a6aeac507836d4395b76e17c20a221", "repo_name": "gitlabhq", "file_path": "./repos/gitlabhq/spec/requests/projects/merge_requests/context_commit_diffs_spec.rb", "method_name": "go", "method_source": "def go(headers: {}, **extra_params)\n      params = {\n        namespace_id: project.namespace.to_param,\n        project_id: project,\n        id: merge_request.iid,\n        only_context_commits: true,\n        page: 0,\n        per_page: 20,\n        format: 'json'\n      }\n\n      get diffs_batch_namespace_project_json_merge_request_path(params.merge(extra_params)), headers: headers\n    end", "ast_json": "{\"type\":\"def\",\"children\":[\"go\",{\"type\":\"args\",\"children\":[{\"type\":\"kwoptarg\",\"children\":[\"headers\",{\"type\":\"hash\",\"children\":[]}]},{\"type\":\"kwrestarg\",\"children\":[\"extra_params\"]}]},{\"type\":\"begin\",\"children\":[{\"type\":\"lvasgn\",\"children\":[\"params\",{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"namespace_id\"]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"project\"]},\"namespace\"]},\"to_param\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"project_id\"]},{\"type\":\"send\",\"children\":[null,\"project\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"id\"]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"merge_request\"]},\"iid\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"only_context_commits\"]},{\"type\":\"true\",\"children\":[]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"page\"]},{\"type\":\"int\",\"children\":[0]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"per_page\"]},{\"type\":\"int\",\"children\":[20]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"format\"]},{\"type\":\"str\",\"children\":[\"json\"]}]}]}]},{\"type\":\"send\",\"children\":[null,\"get\",{\"type\":\"send\",\"children\":[null,\"diffs_batch_namespace_project_json_merge_request_path\",{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"params\"]},\"merge\",{\"type\":\"lvar\",\"children\":[\"extra_params\"]}]}]},{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"headers\"]},{\"type\":\"lvar\",\"children\":[\"headers\"]}]}]}]}]}]}", "descriptions": [{"source": "method_name", "text": "gos"}]}
