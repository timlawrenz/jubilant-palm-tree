{"repo_name":"fastlane","file_path":"./repos/fastlane/fastlane/lib/fastlane/plugins/plugin_info.rb","start_line":22,"raw_source":"def require_path\n      gem_name.tr('-', '/')\n    end","complexity_score":2.2,"ast_json":"{\"type\":\"def\",\"children\":[\"require_path\",{\"type\":\"args\",\"children\":[]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"gem_name\"]},\"tr\",{\"type\":\"str\",\"children\":[\"-\"]},{\"type\":\"str\",\"children\":[\"/\"]}]}]}","id":"53014d4d-af5f-4000-a42a-aca10ff32f53"}
{"repo_name":"discourse","file_path":"./repos/discourse/plugins/discourse-calendar/vendor/holidays/lib/generated_definitions/mt_mt.rb","start_line":13,"raw_source":"def self.holidays_by_month\n      {\n                0 => [{:function => \"easter(year)\", :function_arguments => [:year], :function_modifier => -2, :name => \"Il-Ġimgħa l-Kbira\", :regions => [:mt_mt]}],\n      1 => [{:mday => 1, :name => \"L-Ewwel tas-Sena\", :regions => [:mt_mt]}],\n      2 => [{:mday => 10, :name => \"Nawfraġju ta' San Pawl\", :regions => [:mt_mt]}],\n      3 => [{:mday => 19, :name => \"San Ġużepp\", :regions => [:mt_mt]},\n            {:mday => 31, :name => \"Jum il-Ħelsien\", :regions => [:mt_mt]}],\n      5 => [{:mday => 1, :name => \"Jum il-Ħaddiem\", :regions => [:mt_mt]}],\n      6 => [{:mday => 7, :name => \"Sette Giugno\", :regions => [:mt_mt]},\n            {:mday => 29, :name => \"L-Imnarja\", :regions => [:mt_mt]}],\n      8 => [{:mday => 15, :name => \"Santa Marija\", :regions => [:mt_mt]}],\n      9 => [{:mday => 8, :name => \"Jum il-Vitorja\", :regions => [:mt_mt]},\n            {:mday => 21, :name => \"Jum l-Indipendenza\", :regions => [:mt_mt]}],\n      12 => [{:mday => 8, :name => \"Il-Kunċizzjoni\", :regions => [:mt_mt]},\n            {:mday => 13, :name => \"Jum ir-Repubblika\", :regions => [:mt_mt]},\n            {:mday => 25, :name => \"Il-Milied\", :regions => [:mt_mt]}]\n      }\n    end","complexity_score":5.5,"ast_json":"{\"type\":\"defs\",\"children\":[{\"type\":\"self\",\"children\":[]},\"holidays_by_month\",{\"type\":\"args\",\"children\":[]},{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"int\",\"children\":[0]},{\"type\":\"array\",\"children\":[{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"function\"]},{\"type\":\"str\",\"children\":[\"easter(year)\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"function_arguments\"]},{\"type\":\"array\",\"children\":[{\"type\":\"sym\",\"children\":[\"year\"]}]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"function_modifier\"]},{\"type\":\"int\",\"children\":[-2]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"name\"]},{\"type\":\"str\",\"children\":[\"Il-Ġimgħa l-Kbira\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"regions\"]},{\"type\":\"array\",\"children\":[{\"type\":\"sym\",\"children\":[\"mt_mt\"]}]}]}]}]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"int\",\"children\":[1]},{\"type\":\"array\",\"children\":[{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"mday\"]},{\"type\":\"int\",\"children\":[1]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"name\"]},{\"type\":\"str\",\"children\":[\"L-Ewwel tas-Sena\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"regions\"]},{\"type\":\"array\",\"children\":[{\"type\":\"sym\",\"children\":[\"mt_mt\"]}]}]}]}]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"int\",\"children\":[2]},{\"type\":\"array\",\"children\":[{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"mday\"]},{\"type\":\"int\",\"children\":[10]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"name\"]},{\"type\":\"str\",\"children\":[\"Nawfraġju ta' San Pawl\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"regions\"]},{\"type\":\"array\",\"children\":[{\"type\":\"sym\",\"children\":[\"mt_mt\"]}]}]}]}]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"int\",\"children\":[3]},{\"type\":\"array\",\"children\":[{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"mday\"]},{\"type\":\"int\",\"children\":[19]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"name\"]},{\"type\":\"str\",\"children\":[\"San Ġużepp\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"regions\"]},{\"type\":\"array\",\"children\":[{\"type\":\"sym\",\"children\":[\"mt_mt\"]}]}]}]},{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"mday\"]},{\"type\":\"int\",\"children\":[31]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"name\"]},{\"type\":\"str\",\"children\":[\"Jum il-Ħelsien\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"regions\"]},{\"type\":\"array\",\"children\":[{\"type\":\"sym\",\"children\":[\"mt_mt\"]}]}]}]}]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"int\",\"children\":[5]},{\"type\":\"array\",\"children\":[{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"mday\"]},{\"type\":\"int\",\"children\":[1]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"name\"]},{\"type\":\"str\",\"children\":[\"Jum il-Ħaddiem\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"regions\"]},{\"type\":\"array\",\"children\":[{\"type\":\"sym\",\"children\":[\"mt_mt\"]}]}]}]}]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"int\",\"children\":[6]},{\"type\":\"array\",\"children\":[{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"mday\"]},{\"type\":\"int\",\"children\":[7]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"name\"]},{\"type\":\"str\",\"children\":[\"Sette Giugno\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"regions\"]},{\"type\":\"array\",\"children\":[{\"type\":\"sym\",\"children\":[\"mt_mt\"]}]}]}]},{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"mday\"]},{\"type\":\"int\",\"children\":[29]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"name\"]},{\"type\":\"str\",\"children\":[\"L-Imnarja\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"regions\"]},{\"type\":\"array\",\"children\":[{\"type\":\"sym\",\"children\":[\"mt_mt\"]}]}]}]}]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"int\",\"children\":[8]},{\"type\":\"array\",\"children\":[{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"mday\"]},{\"type\":\"int\",\"children\":[15]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"name\"]},{\"type\":\"str\",\"children\":[\"Santa Marija\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"regions\"]},{\"type\":\"array\",\"children\":[{\"type\":\"sym\",\"children\":[\"mt_mt\"]}]}]}]}]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"int\",\"children\":[9]},{\"type\":\"array\",\"children\":[{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"mday\"]},{\"type\":\"int\",\"children\":[8]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"name\"]},{\"type\":\"str\",\"children\":[\"Jum il-Vitorja\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"regions\"]},{\"type\":\"array\",\"children\":[{\"type\":\"sym\",\"children\":[\"mt_mt\"]}]}]}]},{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"mday\"]},{\"type\":\"int\",\"children\":[21]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"name\"]},{\"type\":\"str\",\"children\":[\"Jum l-Indipendenza\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"regions\"]},{\"type\":\"array\",\"children\":[{\"type\":\"sym\",\"children\":[\"mt_mt\"]}]}]}]}]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"int\",\"children\":[12]},{\"type\":\"array\",\"children\":[{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"mday\"]},{\"type\":\"int\",\"children\":[8]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"name\"]},{\"type\":\"str\",\"children\":[\"Il-Kunċizzjoni\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"regions\"]},{\"type\":\"array\",\"children\":[{\"type\":\"sym\",\"children\":[\"mt_mt\"]}]}]}]},{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"mday\"]},{\"type\":\"int\",\"children\":[13]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"name\"]},{\"type\":\"str\",\"children\":[\"Jum ir-Repubblika\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"regions\"]},{\"type\":\"array\",\"children\":[{\"type\":\"sym\",\"children\":[\"mt_mt\"]}]}]}]},{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"mday\"]},{\"type\":\"int\",\"children\":[25]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"name\"]},{\"type\":\"str\",\"children\":[\"Il-Milied\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"regions\"]},{\"type\":\"array\",\"children\":[{\"type\":\"sym\",\"children\":[\"mt_mt\"]}]}]}]}]}]}]}]}","id":"5b102da5-dd1f-49ed-88ac-e29f663c7720"}
{"repo_name":"gitlabhq","file_path":"./repos/gitlabhq/lib/search/navigation.rb","start_line":92,"raw_source":"def get_sub_items\n      ::WorkItems::Type::TYPE_NAMES.each_with_object({}) do |(key, value, index), hash|\n        next if key.to_s == 'epic'\n\n        hash[key] ||= {}\n        hash[key][:scope] = 'issues'\n        hash[key][:label] = value\n        hash[key][:type] = key\n        hash[key][:sort] = index\n        hash[key][:active] = ''\n        hash[key][:condition] = show_issues_search_tab?\n      end\n    end","complexity_score":25.8,"ast_json":"{\"type\":\"def\",\"children\":[\"get_sub_items\",{\"type\":\"args\",\"children\":[]},{\"type\":\"block\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"cbase\",\"children\":[]},\"WorkItems\"]},\"Type\"]},\"TYPE_NAMES\"]},\"each_with_object\",{\"type\":\"hash\",\"children\":[]}]},{\"type\":\"args\",\"children\":[{\"type\":\"mlhs\",\"children\":[{\"type\":\"arg\",\"children\":[\"key\"]},{\"type\":\"arg\",\"children\":[\"value\"]},{\"type\":\"arg\",\"children\":[\"index\"]}]},{\"type\":\"arg\",\"children\":[\"hash\"]}]},{\"type\":\"begin\",\"children\":[{\"type\":\"if\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"key\"]},\"to_s\"]},\"==\",{\"type\":\"str\",\"children\":[\"epic\"]}]},{\"type\":\"next\",\"children\":[]},null]},{\"type\":\"or_asgn\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"hash\"]},\"[]\",{\"type\":\"lvar\",\"children\":[\"key\"]}]},{\"type\":\"hash\",\"children\":[]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"hash\"]},\"[]\",{\"type\":\"lvar\",\"children\":[\"key\"]}]},\"[]=\",{\"type\":\"sym\",\"children\":[\"scope\"]},{\"type\":\"str\",\"children\":[\"issues\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"hash\"]},\"[]\",{\"type\":\"lvar\",\"children\":[\"key\"]}]},\"[]=\",{\"type\":\"sym\",\"children\":[\"label\"]},{\"type\":\"lvar\",\"children\":[\"value\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"hash\"]},\"[]\",{\"type\":\"lvar\",\"children\":[\"key\"]}]},\"[]=\",{\"type\":\"sym\",\"children\":[\"type\"]},{\"type\":\"lvar\",\"children\":[\"key\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"hash\"]},\"[]\",{\"type\":\"lvar\",\"children\":[\"key\"]}]},\"[]=\",{\"type\":\"sym\",\"children\":[\"sort\"]},{\"type\":\"lvar\",\"children\":[\"index\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"hash\"]},\"[]\",{\"type\":\"lvar\",\"children\":[\"key\"]}]},\"[]=\",{\"type\":\"sym\",\"children\":[\"active\"]},{\"type\":\"str\",\"children\":[\"\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"hash\"]},\"[]\",{\"type\":\"lvar\",\"children\":[\"key\"]}]},\"[]=\",{\"type\":\"sym\",\"children\":[\"condition\"]},{\"type\":\"send\",\"children\":[null,\"show_issues_search_tab?\"]}]}]}]}]}","id":"078da24f-e390-499c-afad-f0e322034b6d"}
{"repo_name":"gitlabhq","file_path":"./repos/gitlabhq/spec/helpers/enable_search_settings_helper_spec.rb","start_line":7,"raw_source":"def before_content\n      helper.content_for(:before_content)\n    end","complexity_score":2.2,"ast_json":"{\"type\":\"def\",\"children\":[\"before_content\",{\"type\":\"args\",\"children\":[]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"helper\"]},\"content_for\",{\"type\":\"sym\",\"children\":[\"before_content\"]}]}]}","id":"05fc9276-af8f-4013-bffe-a0feaf9eceae"}
{"repo_name":"gitlabhq","file_path":"./repos/gitlabhq/app/models/network/graph.rb","start_line":114,"raw_source":"def list_commits(skip = 0)\n      Gitlab::SafeRequestStore.fetch([@project, :network_graph_commits, skip]) do\n        opts = {\n          revisions: %w[--tags --branches],\n          pagination_params: { limit: self.class.max_count },\n          reverse: false,\n          order: :date,\n          skip: skip\n        }\n\n        if @filter_ref\n          opts[:ref] = @commit.id\n          opts[:before] = @commit.committed_date\n        else\n          opts[:ref] = @ref\n        end\n\n        Gitlab::Git::Commit.list_all(@repo.raw_repository, opts)\n      end\n    end","complexity_score":17.5,"ast_json":"{\"type\":\"def\",\"children\":[\"list_commits\",{\"type\":\"args\",\"children\":[{\"type\":\"optarg\",\"children\":[\"skip\",{\"type\":\"int\",\"children\":[0]}]}]},{\"type\":\"block\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Gitlab\"]},\"SafeRequestStore\"]},\"fetch\",{\"type\":\"array\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@project\"]},{\"type\":\"sym\",\"children\":[\"network_graph_commits\"]},{\"type\":\"lvar\",\"children\":[\"skip\"]}]}]},{\"type\":\"args\",\"children\":[]},{\"type\":\"begin\",\"children\":[{\"type\":\"lvasgn\",\"children\":[\"opts\",{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"revisions\"]},{\"type\":\"array\",\"children\":[{\"type\":\"str\",\"children\":[\"--tags\"]},{\"type\":\"str\",\"children\":[\"--branches\"]}]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"pagination_params\"]},{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"limit\"]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"self\",\"children\":[]},\"class\"]},\"max_count\"]}]}]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"reverse\"]},{\"type\":\"false\",\"children\":[]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"order\"]},{\"type\":\"sym\",\"children\":[\"date\"]}]},{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"skip\"]},{\"type\":\"lvar\",\"children\":[\"skip\"]}]}]}]},{\"type\":\"if\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@filter_ref\"]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"opts\"]},\"[]=\",{\"type\":\"sym\",\"children\":[\"ref\"]},{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@commit\"]},\"id\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"opts\"]},\"[]=\",{\"type\":\"sym\",\"children\":[\"before\"]},{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@commit\"]},\"committed_date\"]}]}]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"opts\"]},\"[]=\",{\"type\":\"sym\",\"children\":[\"ref\"]},{\"type\":\"ivar\",\"children\":[\"@ref\"]}]}]},{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Gitlab\"]},\"Git\"]},\"Commit\"]},\"list_all\",{\"type\":\"send\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@repo\"]},\"raw_repository\"]},{\"type\":\"lvar\",\"children\":[\"opts\"]}]}]}]}]}","id":"d2843ca5-02f8-4328-8b5b-dd4522292170"}
{"repo_name":"rails","file_path":"./repos/rails/actionpack/test/controller/request_forgery_protection_test.rb","start_line":95,"raw_source":"def encrypted\n    cookies.encrypted[:foo] = \"bar\"\n    head :ok\n  end","complexity_score":4.2,"ast_json":"{\"type\":\"def\",\"children\":[\"encrypted\",{\"type\":\"args\",\"children\":[]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"cookies\"]},\"encrypted\"]},\"[]=\",{\"type\":\"sym\",\"children\":[\"foo\"]},{\"type\":\"str\",\"children\":[\"bar\"]}]},{\"type\":\"send\",\"children\":[null,\"head\",{\"type\":\"sym\",\"children\":[\"ok\"]}]}]}]}","id":"79babbc3-b1ae-4b0c-9c01-33b851889d7d"}
{"repo_name":"rails","file_path":"./repos/rails/actionview/lib/action_view/routing_url_for.rb","start_line":82,"raw_source":"def url_for(options = nil)\n      case options\n      when String\n        options\n      when nil\n        super(only_path: _generate_paths_by_default)\n      when Hash\n        options = options.symbolize_keys\n        ensure_only_path_option(options)\n\n        super(options)\n      when ActionController::Parameters\n        ensure_only_path_option(options)\n\n        super(options)\n      when :back\n        _back_url\n      when Array\n        components = options.dup\n        options = components.extract_options!\n        ensure_only_path_option(options)\n\n        if options[:only_path]\n          polymorphic_path(components, options)\n        else\n          polymorphic_url(components, options)\n        end\n      else\n        method = _generate_paths_by_default ? :path : :url\n        builder = ActionDispatch::Routing::PolymorphicRoutes::HelperMethodBuilder.public_send(method)\n\n        case options\n        when Symbol\n          builder.handle_string_call(self, options)\n        when Class\n          builder.handle_class_call(self, options)\n        else\n          builder.handle_model_call(self, options)\n        end\n      end\n    end","complexity_score":44.3,"ast_json":"{\"type\":\"def\",\"children\":[\"url_for\",{\"type\":\"args\",\"children\":[{\"type\":\"optarg\",\"children\":[\"options\",{\"type\":\"nil\",\"children\":[]}]}]},{\"type\":\"case\",\"children\":[{\"type\":\"lvar\",\"children\":[\"options\"]},{\"type\":\"when\",\"children\":[{\"type\":\"const\",\"children\":[null,\"String\"]},{\"type\":\"lvar\",\"children\":[\"options\"]}]},{\"type\":\"when\",\"children\":[{\"type\":\"nil\",\"children\":[]},{\"type\":\"super\",\"children\":[{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"only_path\"]},{\"type\":\"send\",\"children\":[null,\"_generate_paths_by_default\"]}]}]}]}]},{\"type\":\"when\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Hash\"]},{\"type\":\"begin\",\"children\":[{\"type\":\"lvasgn\",\"children\":[\"options\",{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"options\"]},\"symbolize_keys\"]}]},{\"type\":\"send\",\"children\":[null,\"ensure_only_path_option\",{\"type\":\"lvar\",\"children\":[\"options\"]}]},{\"type\":\"super\",\"children\":[{\"type\":\"lvar\",\"children\":[\"options\"]}]}]}]},{\"type\":\"when\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"ActionController\"]},\"Parameters\"]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[null,\"ensure_only_path_option\",{\"type\":\"lvar\",\"children\":[\"options\"]}]},{\"type\":\"super\",\"children\":[{\"type\":\"lvar\",\"children\":[\"options\"]}]}]}]},{\"type\":\"when\",\"children\":[{\"type\":\"sym\",\"children\":[\"back\"]},{\"type\":\"send\",\"children\":[null,\"_back_url\"]}]},{\"type\":\"when\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Array\"]},{\"type\":\"begin\",\"children\":[{\"type\":\"lvasgn\",\"children\":[\"components\",{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"options\"]},\"dup\"]}]},{\"type\":\"lvasgn\",\"children\":[\"options\",{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"components\"]},\"extract_options!\"]}]},{\"type\":\"send\",\"children\":[null,\"ensure_only_path_option\",{\"type\":\"lvar\",\"children\":[\"options\"]}]},{\"type\":\"if\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"options\"]},\"[]\",{\"type\":\"sym\",\"children\":[\"only_path\"]}]},{\"type\":\"send\",\"children\":[null,\"polymorphic_path\",{\"type\":\"lvar\",\"children\":[\"components\"]},{\"type\":\"lvar\",\"children\":[\"options\"]}]},{\"type\":\"send\",\"children\":[null,\"polymorphic_url\",{\"type\":\"lvar\",\"children\":[\"components\"]},{\"type\":\"lvar\",\"children\":[\"options\"]}]}]}]}]},{\"type\":\"begin\",\"children\":[{\"type\":\"lvasgn\",\"children\":[\"method\",{\"type\":\"if\",\"children\":[{\"type\":\"send\",\"children\":[null,\"_generate_paths_by_default\"]},{\"type\":\"sym\",\"children\":[\"path\"]},{\"type\":\"sym\",\"children\":[\"url\"]}]}]},{\"type\":\"lvasgn\",\"children\":[\"builder\",{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"ActionDispatch\"]},\"Routing\"]},\"PolymorphicRoutes\"]},\"HelperMethodBuilder\"]},\"public_send\",{\"type\":\"lvar\",\"children\":[\"method\"]}]}]},{\"type\":\"case\",\"children\":[{\"type\":\"lvar\",\"children\":[\"options\"]},{\"type\":\"when\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Symbol\"]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"builder\"]},\"handle_string_call\",{\"type\":\"self\",\"children\":[]},{\"type\":\"lvar\",\"children\":[\"options\"]}]}]},{\"type\":\"when\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Class\"]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"builder\"]},\"handle_class_call\",{\"type\":\"self\",\"children\":[]},{\"type\":\"lvar\",\"children\":[\"options\"]}]}]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"builder\"]},\"handle_model_call\",{\"type\":\"self\",\"children\":[]},{\"type\":\"lvar\",\"children\":[\"options\"]}]}]}]}]}]}","id":"3b9f9e80-9e2f-40cf-a09b-93d66b438819"}
{"repo_name":"gitlabhq","file_path":"./repos/gitlabhq/app/services/ci/parse_annotations_artifact_service.rb","start_line":11,"raw_source":"def execute(artifact)\n      return error('Artifact is not annotations file type', :bad_request) unless artifact&.annotations?\n\n      return error(\"Annotations Artifact Too Big. Maximum Allowable Size: #{annotations_size_limit}\", :bad_request) if\n        artifact.file.size > annotations_size_limit\n\n      annotations = parse!(artifact)\n      Ci::JobAnnotation.bulk_upsert!(annotations, unique_by: %i[partition_id job_id name])\n\n      success\n    rescue SizeLimitError, ParserError, Gitlab::Json.parser_error, ActiveRecord::RecordInvalid => error\n      error(error.message, :bad_request)\n    end","complexity_score":23.7,"ast_json":"{\"type\":\"def\",\"children\":[\"execute\",{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"artifact\"]}]},{\"type\":\"rescue\",\"children\":[{\"type\":\"begin\",\"children\":[{\"type\":\"if\",\"children\":[{\"type\":\"csend\",\"children\":[{\"type\":\"lvar\",\"children\":[\"artifact\"]},\"annotations?\"]},null,{\"type\":\"return\",\"children\":[{\"type\":\"send\",\"children\":[null,\"error\",{\"type\":\"str\",\"children\":[\"Artifact is not annotations file type\"]},{\"type\":\"sym\",\"children\":[\"bad_request\"]}]}]}]},{\"type\":\"if\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"artifact\"]},\"file\"]},\"size\"]},\">\",{\"type\":\"send\",\"children\":[null,\"annotations_size_limit\"]}]},{\"type\":\"return\",\"children\":[{\"type\":\"send\",\"children\":[null,\"error\",{\"type\":\"dstr\",\"children\":[{\"type\":\"str\",\"children\":[\"Annotations Artifact Too Big. Maximum Allowable Size: \"]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[null,\"annotations_size_limit\"]}]}]},{\"type\":\"sym\",\"children\":[\"bad_request\"]}]}]},null]},{\"type\":\"lvasgn\",\"children\":[\"annotations\",{\"type\":\"send\",\"children\":[null,\"parse!\",{\"type\":\"lvar\",\"children\":[\"artifact\"]}]}]},{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Ci\"]},\"JobAnnotation\"]},\"bulk_upsert!\",{\"type\":\"lvar\",\"children\":[\"annotations\"]},{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"unique_by\"]},{\"type\":\"array\",\"children\":[{\"type\":\"sym\",\"children\":[\"partition_id\"]},{\"type\":\"sym\",\"children\":[\"job_id\"]},{\"type\":\"sym\",\"children\":[\"name\"]}]}]}]}]},{\"type\":\"send\",\"children\":[null,\"success\"]}]},{\"type\":\"resbody\",\"children\":[{\"type\":\"array\",\"children\":[{\"type\":\"const\",\"children\":[null,\"SizeLimitError\"]},{\"type\":\"const\",\"children\":[null,\"ParserError\"]},{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Gitlab\"]},\"Json\"]},\"parser_error\"]},{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"ActiveRecord\"]},\"RecordInvalid\"]}]},{\"type\":\"lvasgn\",\"children\":[\"error\"]},{\"type\":\"send\",\"children\":[null,\"error\",{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"error\"]},\"message\"]},{\"type\":\"sym\",\"children\":[\"bad_request\"]}]}]},null]}]}","id":"b2cf3445-4772-4c4a-862c-e83ee737c17d"}
{"repo_name":"gitlabhq","file_path":"./repos/gitlabhq/app/services/resource_events/change_milestone_service.rb","start_line":7,"raw_source":"def initialize(resource, user, old_milestone:)\n      super(resource, user)\n\n      @milestone = resource&.milestone\n      @old_milestone = old_milestone\n    end","complexity_score":4.0,"ast_json":"{\"type\":\"def\",\"children\":[\"initialize\",{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"resource\"]},{\"type\":\"arg\",\"children\":[\"user\"]},{\"type\":\"kwarg\",\"children\":[\"old_milestone\"]}]},{\"type\":\"begin\",\"children\":[{\"type\":\"super\",\"children\":[{\"type\":\"lvar\",\"children\":[\"resource\"]},{\"type\":\"lvar\",\"children\":[\"user\"]}]},{\"type\":\"ivasgn\",\"children\":[\"@milestone\",{\"type\":\"csend\",\"children\":[{\"type\":\"lvar\",\"children\":[\"resource\"]},\"milestone\"]}]},{\"type\":\"ivasgn\",\"children\":[\"@old_milestone\",{\"type\":\"lvar\",\"children\":[\"old_milestone\"]}]}]}]}","id":"346d3b19-c6be-41e1-8d86-fe23be81bfbb"}
{"repo_name":"gitlabhq","file_path":"./repos/gitlabhq/spec/support/shared_examples/requests/api/graphql/issue_list_shared_examples.rb","start_line":787,"raw_source":"def assignees_as_global_ids(issues)\n      issues.flat_map(&:assignees).map(&:to_global_id).map(&:to_s)\n    end","complexity_score":7.8,"ast_json":"{\"type\":\"def\",\"children\":[\"assignees_as_global_ids\",{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"issues\"]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"issues\"]},\"flat_map\",{\"type\":\"block_pass\",\"children\":[{\"type\":\"sym\",\"children\":[\"assignees\"]}]}]},\"map\",{\"type\":\"block_pass\",\"children\":[{\"type\":\"sym\",\"children\":[\"to_global_id\"]}]}]},\"map\",{\"type\":\"block_pass\",\"children\":[{\"type\":\"sym\",\"children\":[\"to_s\"]}]}]}]}","id":"4f069bd9-2bd5-4ade-8b6a-800dc24fc39e"}
{"repo_name":"rubocop","file_path":"./repos/rubocop/lib/rubocop/cop/variable_force/scope.rb","start_line":90,"raw_source":"def belong_to_inner_scope?(target_node)\n          return false if !target_node.parent || target_node.parent.equal?(node)\n          return false unless SCOPE_TYPES.include?(target_node.parent.type)\n\n          indices = OUTER_SCOPE_CHILD_INDICES[target_node.parent.type]\n          return true unless indices\n\n          !indices.include?(target_node.sibling_index)\n        end","complexity_score":21.9,"ast_json":"{\"type\":\"def\",\"children\":[\"belong_to_inner_scope?\",{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"target_node\"]}]},{\"type\":\"begin\",\"children\":[{\"type\":\"if\",\"children\":[{\"type\":\"or\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"target_node\"]},\"parent\"]},\"!\"]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"target_node\"]},\"parent\"]},\"equal?\",{\"type\":\"send\",\"children\":[null,\"node\"]}]}]},{\"type\":\"return\",\"children\":[{\"type\":\"false\",\"children\":[]}]},null]},{\"type\":\"if\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"SCOPE_TYPES\"]},\"include?\",{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"target_node\"]},\"parent\"]},\"type\"]}]},null,{\"type\":\"return\",\"children\":[{\"type\":\"false\",\"children\":[]}]}]},{\"type\":\"lvasgn\",\"children\":[\"indices\",{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"OUTER_SCOPE_CHILD_INDICES\"]},\"[]\",{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"target_node\"]},\"parent\"]},\"type\"]}]}]},{\"type\":\"if\",\"children\":[{\"type\":\"lvar\",\"children\":[\"indices\"]},null,{\"type\":\"return\",\"children\":[{\"type\":\"true\",\"children\":[]}]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"indices\"]},\"include?\",{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"target_node\"]},\"sibling_index\"]}]},\"!\"]}]}]}","id":"8c08c610-8f61-48f7-8d95-232bc2897398"}
{"repo_name":"rails","file_path":"./repos/rails/activestorage/lib/active_storage/attached/one.rb","start_line":78,"raw_source":"def purge_one\n        Attached::Changes::PurgeOne.new(name, record, attachment)\n      end","complexity_score":4.6,"ast_json":"{\"type\":\"def\",\"children\":[\"purge_one\",{\"type\":\"args\",\"children\":[]},{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Attached\"]},\"Changes\"]},\"PurgeOne\"]},\"new\",{\"type\":\"send\",\"children\":[null,\"name\"]},{\"type\":\"send\",\"children\":[null,\"record\"]},{\"type\":\"send\",\"children\":[null,\"attachment\"]}]}]}","id":"bffc9453-9b9e-4f49-814f-d88ac4bf6118"}
{"repo_name":"brakeman","file_path":"./repos/brakeman/test/tests/github_output.rb","start_line":23,"raw_source":"def github_report\n    tracker = Brakeman.run(\"#{TEST_PATH}/apps/rails6\")\n    tracker.error Racc::ParseError.new('app/services/balance.rb:4 :: parse error on value \"...\" (tDOT3)')\n    tracker.error StandardError.new('Something went wrong')\n    tracker.report.to_github\n  end","complexity_score":8.6,"ast_json":"{\"type\":\"def\",\"children\":[\"github_report\",{\"type\":\"args\",\"children\":[]},{\"type\":\"begin\",\"children\":[{\"type\":\"lvasgn\",\"children\":[\"tracker\",{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Brakeman\"]},\"run\",{\"type\":\"dstr\",\"children\":[{\"type\":\"begin\",\"children\":[{\"type\":\"const\",\"children\":[null,\"TEST_PATH\"]}]},{\"type\":\"str\",\"children\":[\"/apps/rails6\"]}]}]}]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"tracker\"]},\"error\",{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Racc\"]},\"ParseError\"]},\"new\",{\"type\":\"str\",\"children\":[\"app/services/balance.rb:4 :: parse error on value \\\"...\\\" (tDOT3)\"]}]}]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"tracker\"]},\"error\",{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"StandardError\"]},\"new\",{\"type\":\"str\",\"children\":[\"Something went wrong\"]}]}]},{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"tracker\"]},\"report\"]},\"to_github\"]}]}]}","id":"c15625a4-43e3-4b2d-b6ab-b2dbad604850"}
{"repo_name":"rubocop","file_path":"./repos/rubocop/lib/rubocop/cop/style/select_by_regexp.rb","start_line":147,"raw_source":"def opposite?(regexp_method_send_node)\n          regexp_method_send_node.send_type? && regexp_method_send_node.method?(:!~)\n        end","complexity_score":3.2,"ast_json":"{\"type\":\"def\",\"children\":[\"opposite?\",{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"regexp_method_send_node\"]}]},{\"type\":\"and\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"regexp_method_send_node\"]},\"send_type?\"]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"regexp_method_send_node\"]},\"method?\",{\"type\":\"sym\",\"children\":[\"!~\"]}]}]}]}","id":"35b6d054-b0f6-4e3c-97d1-25322840d140"}
{"repo_name":"rails","file_path":"./repos/rails/actionview/test/template/form_helper/form_with_test.rb","start_line":378,"raw_source":"def test_form_with_with_persisted_to_model\n    post_form = RecordForm.new(to_model: @post)\n\n    form_with(model: post_form) { }\n\n    expected = whole_form(\"/posts/123\", method: :patch) { \"\" }\n\n    assert_dom_equal expected, @rendered\n  end","complexity_score":8.0,"ast_json":"{\"type\":\"def\",\"children\":[\"test_form_with_with_persisted_to_model\",{\"type\":\"args\",\"children\":[]},{\"type\":\"begin\",\"children\":[{\"type\":\"lvasgn\",\"children\":[\"post_form\",{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"RecordForm\"]},\"new\",{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"to_model\"]},{\"type\":\"ivar\",\"children\":[\"@post\"]}]}]}]}]},{\"type\":\"block\",\"children\":[{\"type\":\"send\",\"children\":[null,\"form_with\",{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"model\"]},{\"type\":\"lvar\",\"children\":[\"post_form\"]}]}]}]},{\"type\":\"args\",\"children\":[]},null]},{\"type\":\"lvasgn\",\"children\":[\"expected\",{\"type\":\"block\",\"children\":[{\"type\":\"send\",\"children\":[null,\"whole_form\",{\"type\":\"str\",\"children\":[\"/posts/123\"]},{\"type\":\"hash\",\"children\":[{\"type\":\"pair\",\"children\":[{\"type\":\"sym\",\"children\":[\"method\"]},{\"type\":\"sym\",\"children\":[\"patch\"]}]}]}]},{\"type\":\"args\",\"children\":[]},{\"type\":\"str\",\"children\":[\"\"]}]}]},{\"type\":\"send\",\"children\":[null,\"assert_dom_equal\",{\"type\":\"lvar\",\"children\":[\"expected\"]},{\"type\":\"ivar\",\"children\":[\"@rendered\"]}]}]}]}","id":"316aa0e2-6f22-4a7e-b0ed-203f961f0f4c"}
{"repo_name":"gitlabhq","file_path":"./repos/gitlabhq/lib/gitlab/import_export/lfs_restorer.rb","start_line":72,"raw_source":"def lfs_json\n        return {} unless has_lfs_json?\n\n        @lfs_json ||=\n          begin\n            json = File.read(lfs_json_path)\n            Gitlab::Json.parse(json)\n          rescue StandardError\n            raise Gitlab::ImportExport::Error, 'Incorrect JSON format'\n          end\n      end","complexity_score":10.1,"ast_json":"{\"type\":\"def\",\"children\":[\"lfs_json\",{\"type\":\"args\",\"children\":[]},{\"type\":\"begin\",\"children\":[{\"type\":\"if\",\"children\":[{\"type\":\"send\",\"children\":[null,\"has_lfs_json?\"]},null,{\"type\":\"return\",\"children\":[{\"type\":\"hash\",\"children\":[]}]}]},{\"type\":\"or_asgn\",\"children\":[{\"type\":\"ivasgn\",\"children\":[\"@lfs_json\"]},{\"type\":\"kwbegin\",\"children\":[{\"type\":\"rescue\",\"children\":[{\"type\":\"begin\",\"children\":[{\"type\":\"lvasgn\",\"children\":[\"json\",{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"File\"]},\"read\",{\"type\":\"send\",\"children\":[null,\"lfs_json_path\"]}]}]},{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Gitlab\"]},\"Json\"]},\"parse\",{\"type\":\"lvar\",\"children\":[\"json\"]}]}]},{\"type\":\"resbody\",\"children\":[{\"type\":\"array\",\"children\":[{\"type\":\"const\",\"children\":[null,\"StandardError\"]}]},null,{\"type\":\"send\",\"children\":[null,\"raise\",{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Gitlab\"]},\"ImportExport\"]},\"Error\"]},{\"type\":\"str\",\"children\":[\"Incorrect JSON format\"]}]}]},null]}]}]}]}]}","id":"e8c34a9d-9a7d-40ef-82e0-bee708dedb1c"}
{"repo_name":"puma","file_path":"./repos/puma/lib/puma/configuration.rb","start_line":221,"raw_source":"def puma_default_options(env = ENV)\n      defaults = DEFAULTS.dup\n      puma_options_from_env(env).each { |k,v| defaults[k] = v if v }\n      defaults\n    end","complexity_score":8.5,"ast_json":"{\"type\":\"def\",\"children\":[\"puma_default_options\",{\"type\":\"args\",\"children\":[{\"type\":\"optarg\",\"children\":[\"env\",{\"type\":\"const\",\"children\":[null,\"ENV\"]}]}]},{\"type\":\"begin\",\"children\":[{\"type\":\"lvasgn\",\"children\":[\"defaults\",{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"DEFAULTS\"]},\"dup\"]}]},{\"type\":\"block\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"puma_options_from_env\",{\"type\":\"lvar\",\"children\":[\"env\"]}]},\"each\"]},{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"k\"]},{\"type\":\"arg\",\"children\":[\"v\"]}]},{\"type\":\"if\",\"children\":[{\"type\":\"lvar\",\"children\":[\"v\"]},{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"defaults\"]},\"[]=\",{\"type\":\"lvar\",\"children\":[\"k\"]},{\"type\":\"lvar\",\"children\":[\"v\"]}]},null]}]},{\"type\":\"lvar\",\"children\":[\"defaults\"]}]}]}","id":"0b05ea37-b5ab-45d1-b2cf-5e8d6d602116"}
{"repo_name":"manageiq","file_path":"./repos/manageiq/app/models/miq_compare.rb","start_line":527,"raw_source":"def get_record(id)\n    send(:\"get_#{@mode}_record\", id)\n  end","complexity_score":3.0,"ast_json":"{\"type\":\"def\",\"children\":[\"get_record\",{\"type\":\"args\",\"children\":[{\"type\":\"arg\",\"children\":[\"id\"]}]},{\"type\":\"send\",\"children\":[null,\"send\",{\"type\":\"dsym\",\"children\":[{\"type\":\"str\",\"children\":[\"get_\"]},{\"type\":\"begin\",\"children\":[{\"type\":\"ivar\",\"children\":[\"@mode\"]}]},{\"type\":\"str\",\"children\":[\"_record\"]}]},{\"type\":\"lvar\",\"children\":[\"id\"]}]}]}","id":"3a2bfb57-0483-470d-b69e-6e8f395b2abc"}
{"repo_name":"gitlabhq","file_path":"./repos/gitlabhq/app/finders/ci/jobs_finder.rb","start_line":41,"raw_source":"def runner_jobs\n      return unless runner\n      raise Gitlab::Access::AccessDeniedError unless can?(current_user, :read_builds, runner)\n\n      return jobs_by_type(runner, type).relevant unless params[:match_compatible_runner_only]\n\n      # rubocop:disable CodeReuse/ServiceClass -- service contains logic to find pending builds for a given runner type\n      pending_builds = Ci::Queue::BuildQueueService.new(runner).build_candidates\n      # rubocop:enable CodeReuse/ServiceClass\n\n      # rubocop:disable CodeReuse/ActiveRecord -- Remove ordering on inner query for performance, and allow custom query to include partition information\n      subquery = pending_builds.reorder(nil).select(:build_id, :partition_id)\n      Ci::Build.joins(\"JOIN (#{subquery.to_sql}) AS pending_subquery ON\n        #{Ci::Build.table_name}.id = pending_subquery.build_id AND\n        #{Ci::Build.table_name}.partition_id = pending_subquery.partition_id\")\n      # rubocop:enable CodeReuse/ActiveRecord\n    end","complexity_score":28.5,"ast_json":"{\"type\":\"def\",\"children\":[\"runner_jobs\",{\"type\":\"args\",\"children\":[]},{\"type\":\"begin\",\"children\":[{\"type\":\"if\",\"children\":[{\"type\":\"send\",\"children\":[null,\"runner\"]},null,{\"type\":\"return\",\"children\":[]}]},{\"type\":\"if\",\"children\":[{\"type\":\"send\",\"children\":[null,\"can?\",{\"type\":\"send\",\"children\":[null,\"current_user\"]},{\"type\":\"sym\",\"children\":[\"read_builds\"]},{\"type\":\"send\",\"children\":[null,\"runner\"]}]},null,{\"type\":\"send\",\"children\":[null,\"raise\",{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Gitlab\"]},\"Access\"]},\"AccessDeniedError\"]}]}]},{\"type\":\"if\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"params\"]},\"[]\",{\"type\":\"sym\",\"children\":[\"match_compatible_runner_only\"]}]},null,{\"type\":\"return\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[null,\"jobs_by_type\",{\"type\":\"send\",\"children\":[null,\"runner\"]},{\"type\":\"send\",\"children\":[null,\"type\"]}]},\"relevant\"]}]}]},{\"type\":\"lvasgn\",\"children\":[\"pending_builds\",{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Ci\"]},\"Queue\"]},\"BuildQueueService\"]},\"new\",{\"type\":\"send\",\"children\":[null,\"runner\"]}]},\"build_candidates\"]}]},{\"type\":\"lvasgn\",\"children\":[\"subquery\",{\"type\":\"send\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"pending_builds\"]},\"reorder\",{\"type\":\"nil\",\"children\":[]}]},\"select\",{\"type\":\"sym\",\"children\":[\"build_id\"]},{\"type\":\"sym\",\"children\":[\"partition_id\"]}]}]},{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Ci\"]},\"Build\"]},\"joins\",{\"type\":\"dstr\",\"children\":[{\"type\":\"str\",\"children\":[\"JOIN (\"]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"lvar\",\"children\":[\"subquery\"]},\"to_sql\"]}]},{\"type\":\"str\",\"children\":[\") AS pending_subquery ON\\n\"]},{\"type\":\"str\",\"children\":[\"        \"]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Ci\"]},\"Build\"]},\"table_name\"]}]},{\"type\":\"str\",\"children\":[\".id = pending_subquery.build_id AND\\n\"]},{\"type\":\"str\",\"children\":[\"        \"]},{\"type\":\"begin\",\"children\":[{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Ci\"]},\"Build\"]},\"table_name\"]}]},{\"type\":\"str\",\"children\":[\".partition_id = pending_subquery.partition_id\"]}]}]}]}]}","id":"f4b2a7d8-c3c6-41c8-9818-61011e1f1bf4"}
{"repo_name":"gitlabhq","file_path":"./repos/gitlabhq/app/models/ci/trigger.rb","start_line":67,"raw_source":"def can_access_project?\n      Ability.allowed?(self.owner, :create_build, project)\n    end","complexity_score":3.4,"ast_json":"{\"type\":\"def\",\"children\":[\"can_access_project?\",{\"type\":\"args\",\"children\":[]},{\"type\":\"send\",\"children\":[{\"type\":\"const\",\"children\":[null,\"Ability\"]},\"allowed?\",{\"type\":\"send\",\"children\":[{\"type\":\"self\",\"children\":[]},\"owner\"]},{\"type\":\"sym\",\"children\":[\"create_build\"]},{\"type\":\"send\",\"children\":[null,\"project\"]}]}]}","id":"60d0937f-5c43-4e43-9bd2-e3782d919da2"}
